## 데이터 중심 설계의 문제점
 * 현재 방식은 객체 설계를 테이블 설계에 맞춘 방식
 * 테이블의 외래키를 객체에 그대로 가져옴
 * 객체 그래프 탐색이 불가능
 * 참조가 없으므로 UML도 잘못됨

## 연관관계 매핑
 * 단방향 연관관계
   * @ManyToOne, @JoinColumn, @OneToMany, mappedBy
 * 테이블은 양방향 연관관계, 객체는 단방향 2개로 양방향 연관관계
 * 연관관계의 주인(Owner)
   * 양방향 매핑 규칙
   * 객체의 두 관계중 하나를 연관관계의 주인으로 지정
   * 연관관계의 주인만이 외래키를 관리(등록,수정)
   * 주인이 아닌쪽은 mappedBy 사용
   * 주인이 아닌쪽은 읽기만 가능
   * 외래 키가 있는 곳을 주인으로 정해라
 * 양방향 매핑시 가장 많이 하는 실수
   * 연관관계의 주인에 값을 입력해야하는데 하지 않는 실수
   * JPA에서 mappedBy는 update나 등록시 신경 쓰지 않음
 * 양방향 연관관계 주의
   * 순수한 객체 관계를 고려하면 항상 양쪽다 값을 입력해야 한다
   * 연관관계 편의 메소드를 생성하자(주인에서 연관관계에 있는 데이터까지 넣어주기)
   * 양방향 매핑시 무한 루프를 조심하자 
 * 양방향 매핑 정리
   * 단방향 매핑만으로도 이미 연관관계 매핑은 완료
   * 양방향 매핑은 반대 방향으로 조회(객체 그래프 탐색) 기능이 추가된 것 뿐
   * JPQL에서 역방향으로 탐색할 일이 많음
   * 단방향 매핑을 잘 하고 양방향은 필요할 때 추가해도 됨(테이블에 영향을 주지 않음)
 * 연관관계 매핑시 고려사항 3가지
   * 다중성
     * 다대일 : @ManyToOne
       * Member와 Team N:1 일 때 N에 주인관계를 가져야함
     * 일대다 : @OneToMany
       * 1:N에서 1에 주인관계를 가지는 방 법은 실무에서는 잘 사용하지 않음
       * 일대다 단방향 매핑보다는 다대일 양방향 매핑을 사용하자
     * 일대일 : @OneToOne
       * 주 테이블이나 대상테이블 중에 외래 키 선택 가능
       * 다대일과 비슷하다 주인에 외래키 반대편에는 mappedBy적용 
       * 주테이블 외래키 설정시 : 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능 그러나 값이 없으면 null 허용
       * 대상테이블 외래키 설정시 : 일대일에서 일대다 관계로 변경할 때 테이블 유지 가능 그러나 프록시 기능의 한계로 지연 로딩으로 설정해도 항상 즉시 로딩됨
     * 다대다 : @ManyToMany (*실무에서 쓰면 안된다)
   * 단방향,양방향
     * 테이블
       * 외래 키 하나라 양쪽 조인 가능
       * 사실 방향이라는 개념이 없음
     * 객체
       * 참조용 필드가 있는 쪽으로만 참조 가능
       * 한쪽만 참조하면 단방향
       * 양쪽이 서로 참조하면 양방향
   * 연관관계의 주인
     * 주인 : 외래키를 관리하는 참조
     * 주인의 반대편 : 외래 키에 영향을 주지 않음, 단순 조회만 가능